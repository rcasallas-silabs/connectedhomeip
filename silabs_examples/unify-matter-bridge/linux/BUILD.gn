import("//build_overrides/chip.gni")
import("${chip_root}/build/chip/tools.gni")
import("${chip_root}/build/config/linux/pkg_config.gni")

assert(chip_build_tools)

pkg_config("unify") {
  packages = [ "libunify" ]
}

executable("unify-matter-bridge") {
  include_dirs = [
    "src",
    "src/cluster_translator",
    "src/device_type_mapper",
    "src/matter_node_state_monitor",
    "include",
  ]

  sources = [
    "src/matter_data_storage.cpp",
    "src/attribute_state_cache.cpp",
    "src/cluster_translator/bridged_device_basic_info_attribute_translator.cpp",
    "src/cluster_translator/group_command_translator.cpp",
    "src/cluster_translator/group_translator.cpp",
    "src/cluster_translator/identify_attribute_translator.cpp",
    "src/cluster_translator/identify_command_translator.cpp",

    #"src/cluster_translator/level_attribute_translator.cpp",
    #"src/cluster_translator/level_command_translator.cpp",
    "src/cluster_translator/on_off_attribute_translator.cpp",
    "src/cluster_translator/on_off_command_translator.cpp",
    "src/demo_uic_cli.cpp",
    "src/device_type_mapper/matter_device_translator.cpp",
    "src/device_type_mapper/matter_device_types_clusters_list_updated.inc",
    "src/dummy.cpp",
    "src/matter_bridge_config.c",
    "src/matter_bridge_main.cpp",
    "src/matter_node_state_monitor/matter_cluster_interactor.cpp",
    "src/matter_node_state_monitor/matter_endpoint_builder.cpp",
    "src/matter_node_state_monitor/matter_node_state_monitor.cpp",
  ]

  deps = [
    "${chip_root}/examples/platform/linux:app-main",
    "//../unify-matter-bridge-common",
  ]
  configs += [ ":unify" ]
}

group("linux") {
  deps = [ ":unify-matter-bridge" ]
}
